{% extends './base.html' %}
{% load static %}
{% block link %}
    <link href="{% static 'css/global.css' %}" rel="stylesheet" type="text/css">
{% endblock link %}



{% block container %}
    <div class="container cont_register">
        {% block page-header %}
        <div class="page-header">
            <div class="row">
                <div class="col-lg-5 col-lg-offset-4">
                    <h1>用户登录</h1>
                </div>
            </div>
        </div>
        {% endblock %}

        {% block mainbody %}
        <div class="row">
            <div class="col-lg-5 col-lg-offset-3">
                <form action="/login_handle/" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="user_name">用户名:</label>
                        <input type="text" class="form-control name_input" name="user_name" id="user_name" placeholder="请输入用户名" value="{{ uname }}">
                        <div class="user_error">输入错误</div>
                    </div>
                    <div class="form-group">
                        <label for="password">密码:</label>
                        <input type="password" class="form-control pass_input" name="password" id="password" placeholder="请输入密码" value="{{ upassword }}">
                        <div class="pwd_error">输入错误</div>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" name="jizhu" value="1" checked="checked">记住用户名:</label><br/>
                        <a href="#">忘记密码</a>
                    </div>
                    <div class="row">
                        <div class="col-lg-3">
                            <button type="submit" value="登 录" name="" class="btn btn-default">登录</button>
                        </div>
                        <div class="col-lg-3 col-lg-offset-6">
                            <button class="btn btn-default"><a href="{% url 'register' %}">注册</a></button>
                        </div>
                    </div>
                </form>   
            </div>
        </div>
        {% endblock mainbody %}



        {% block centerblock %}
        <div class="row center-block">

        </div>
        {% endblock centerblock %}
    </div>
{% endblock container %}










{% block footer %}
{% endblock footer %}

{% block script %}
    <script>
        $(function () {
            name_error=false;
            pwd_error=false;

            if ({{ error_name }}==1){
                $('.user_error').html('用户名错误').show();
            }

            if ({{ error_pwd }} == 1){
                $('.pwd_error').html('密码错误').show();
            }

            $('.name_input').blur(function () {
                if($('.name_input').val().length==0){
                    $('user_error').html('请填写用户名').show();
                    name_error=false;
                }else {
                    $('.user_error').hide();
                    name_error=true;
                }
            });

            $('.pass_input').blur(function () {
                if ($(this).val().length==0){
                    $('.pwd_error').html('请输入密码').show();
                    pwd_error=false;
                }else {
                    $('.pwd_error').hide();
                    pwd_error=true;
                }

            });
        })
    </script>
{% endblock script %}